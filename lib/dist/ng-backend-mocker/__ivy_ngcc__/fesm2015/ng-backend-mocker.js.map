{"version":3,"file":"ng-backend-mocker.js","sources":["../../../projects/ng-backend-mocker/src/lib/api-mock-http-interceptor.ts","../../../projects/ng-backend-mocker/src/lib/ng-backend-mocker.module.ts","../../../projects/ng-backend-mocker/src/lib/response-checkpoint.ts","../../../projects/ng-backend-mocker/src/public-api.ts","../../../projects/ng-backend-mocker/src/ng-backend-mocker.ts"],"names":[],"mappings":"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","sourcesContent":["import { HttpEvent, HttpHandler, HttpHeaders, HttpInterceptor, HttpRequest, HttpResponse } from \"@angular/common/http\";\nimport { Inject, Injectable } from \"@angular/core\";\nimport { Observable, Subject } from \"rxjs\";\nimport { IBackendMockDataProvider } from \"./ibackend-mockdata-provider\";\n\n\n@Injectable()\nexport class ApiMockHttpInterceptor implements HttpInterceptor {\n\n\n    constructor(\n        @Inject('IBackendMockDataProvider') private backend: IBackendMockDataProvider,\n        @Inject('env') private environment\n    ) {\n        console.log('Environment: ',environment);\n    }\n\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\n\n        if (this.noMock()) {\n\n            return next.handle(req);\n        }\n\n        const interactions = this.backend.getAllInteractions();\n\n        for (const key in interactions) {\n\n            const int = interactions[key];\n\n            if (int.accepts(req)) {\n\n                var handler = new Subject<HttpEvent<any>>();\n\n                console.info(\"Found a response interaction.\");\n\n                var response = new HttpResponse({\n                    body: int.responseBody,\n                    headers: int.responseHeaders,\n                    status: int.responseCode,\n                    url: req.url\n                });\n\n                setTimeout(() => {\n                    handler.next(response);\n                    handler.complete();\n                }, 100);\n\n                return handler;\n            }\n        }\n\n        console.log('redirected to real path');\n        \n        return next.handle(req);\n    }\n\n\n\n    private noMock(): boolean {\n\n        const envAny: any = this.environment;\n\n        if (envAny?.mockBackend) {\n\n            return false;\n        }\n        return true;\n    }\n}","import { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { ApiMockHttpInterceptor } from './api-mock-http-interceptor';\nimport { ResponseCheckPoint } from './response-checkpoint';\nimport { IBackendMockDataProvider } from './ibackend-mockdata-provider'\n\n\n\n@NgModule({\n  declarations: [  ],\n  imports: [\n  ],\n  exports: [\n  ],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: ApiMockHttpInterceptor,\n      multi: true\n    }\n  ]\n})\nexport class NgBackendMockerModule {\n\n  public static forRoot(environment: any): ModuleWithProviders<any> {\n\n    return {\n      ngModule: NgBackendMockerModule,\n      providers: [\n        {\n          provide: 'env',\n          useValue: environment\n        }\n      ]\n    };\n  }\n}\n","import { HttpHeaders, HttpRequest } from \"@angular/common/http\";\n\n\n\n\n\n\nexport class ResponseCheckPoint {\n\n\n    public method: string = 'GET';\n\n    public path: string = '';\n\n    public responseBody: any;\n\n    public responseCode: number = 200;\n\n    public responseHeaders: HttpHeaders = new HttpHeaders();\n\n    public requestSelector: (HttpRequest, ResponseCheckPoint) => boolean;\n\n\n    constructor() {\n\n        this.method = 'GET';\n        this.path = '';\n        this.responseBody = null;\n        this.responseCode = 200;\n        this.responseHeaders = new HttpHeaders();\n        this.requestSelector = (req: HttpRequest<any>, rcp: ResponseCheckPoint) => true;\n    }\n\n    public withMethod(method: string): ResponseCheckPoint {\n        this.method = method;\n        return this;\n    }\n\n    public withPath(path: string): ResponseCheckPoint {\n        this.path = path;\n        return this;\n    }\n\n    public withBody(body: any): ResponseCheckPoint {\n        this.responseBody = body;\n        return this;\n    }\n\n    public withCode(code: number): ResponseCheckPoint {\n        this.responseCode = code;\n        return this;\n    }\n\n    public withHeader(key: string, value: string): ResponseCheckPoint {\n\n        this.responseHeaders.append(key, value);\n        return this;\n    }\n\n    public withSelector(selector: (HttpRequest, ResponseCheckPoint) => boolean): ResponseCheckPoint {\n        this.requestSelector = selector;\n        return this;\n    }\n\n    public selectByPathOnly(): ResponseCheckPoint {\n\n        this.requestSelector = (req: HttpRequest<any>, rcp: ResponseCheckPoint) =>\n            req.url == rcp.path;\n        return this;\n    }\n\n\n    public selectByPathAndMethod(): ResponseCheckPoint {\n\n        this.requestSelector = (req: HttpRequest<any>, rcp: ResponseCheckPoint) =>\n            req.url == rcp.path && req.method.toLowerCase() == rcp.method.toLowerCase();\n        return this;\n    }\n\n    public selectAll():ResponseCheckPoint{\n\n        this.requestSelector = (req: HttpRequest<any>, rcp: ResponseCheckPoint) => true;\n        return this;\n    }\n\n    public accepts(req: HttpRequest<any>): boolean {\n\n        return this.requestSelector(req, this);\n    }\n\n}","/*\n * Public API Surface of ng-backend-mocker\n */\n\nexport * from './lib/ng-backend-mocker.module';\nexport * from './lib/ibackend-mockdata-provider'\nexport * from './lib/response-checkpoint'\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {ApiMockHttpInterceptor as Éµa} from './lib/api-mock-http-interceptor';"]}